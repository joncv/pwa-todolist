{"version":3,"sources":["webpack:///static/js/5.7bee48eafd4bfe2512c9.js","webpack:///./src/pages/Edit.vue","webpack:///Edit.vue","webpack:///./src/pages/Edit.vue?62bd","webpack:///./src/pages/Edit.vue?cd46","webpack:///./src/pages/Edit.vue?f747"],"names":["webpackJsonp","474","module","exports","__webpack_require__","injectStyle","ssrContext","Component","483","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","n","__WEBPACK_IMPORTED_MODULE_1_vuex__","__WEBPACK_IMPORTED_MODULE_2__event_bus__","__WEBPACK_IMPORTED_MODULE_3__common_api__","data","todoType","todoContent","currentTodo","pageType","dialogShow","methods","i","showSaveChangeDialog","this","showSaveChangeDialogConfirmed","console","log","saveTodoChange","createTodo","gotoListPage","showSaveChangeDialogCancelled","isContentChanged","get","_this","set","setTodo","then","changedTodo","showSnackbar","type","msg","err","code","_this2","content","newTodo","addTodo","$router","push","name","computed","created","hideBottomNav","appHeaderTitle","$route","params","setAppHeader","title","show","showMenu","showBack","needBackConfirm","actions","icon","todoId","id","todos","mounted","_this3","$on","eventData","actionIdx","beforeDestroy","$off","498","version","sources","names","mappings","file","sourcesContent","sourceRoot","507","locals","519","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","fill-height","justify-center","label","multi-line","hide-details","model","callback","$$v","expression","_v","row","flat","nativeOn","click","$event","primary","class","red","green","orange","blue","absolute","dark","directives","rawName","staticRenderFns"],"mappings":"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","file":"static/js/5.7bee48eafd4bfe2512c9.js","sourcesContent":["webpackJsonp([5],{\n\n/***/ 474:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(507)\n}\nvar Component = __webpack_require__(37)(\n  /* script */\n  __webpack_require__(483),\n  /* template */\n  __webpack_require__(519),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-a315df0c\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 483:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(58);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(59);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__event_bus__ = __webpack_require__(126);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__common_api__ = __webpack_require__(178);\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    data: function data() {\n        return {\n            todoType: 'ImpEmg',\n            todoContent: '',\n            currentTodo: null,\n            pageType: '',\n            dialogShow: false\n        };\n    },\n\n    methods: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"b\" /* mapActions */])('appShell/appHeader', ['setAppHeader']), __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"b\" /* mapActions */])('appShell/appBottomNavigator', ['hideBottomNav']), __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"b\" /* mapActions */])('todo', ['setTodo', 'addTodo']), __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"b\" /* mapActions */])('appShell/appSnackbar', ['showSnackbar']), {\n        showSaveChangeDialog: function showSaveChangeDialog() {\n            this.dialogShow = true;\n        },\n\n        showSaveChangeDialogConfirmed: function showSaveChangeDialogConfirmed() {\n            console.log('dialog confirm clicked');\n            if (this.pageType === 'edit') {\n                this.saveTodoChange();\n            } else if (this.pageType === 'add') {\n                this.createTodo();\n            } else {\n                this.gotoListPage();\n            }\n        },\n\n        showSaveChangeDialogCancelled: function showSaveChangeDialogCancelled() {\n            this.gotoListPage();\n        },\n        isContentChanged: function isContentChanged() {\n            return this.currentTodo.get('content') !== this.todoContent;\n        },\n        saveTodoChange: function saveTodoChange() {\n            var _this = this;\n\n            this.currentTodo.set('type', this.todoType);\n            this.currentTodo.set('content', this.todoContent);\n            this.setTodo(this.currentTodo).then(function (changedTodo) {\n                _this.showSnackbar({ type: 'success', msg: '保存成功！' });\n                _this.gotoListPage();\n            }, function (err) {\n                console.log(err);\n                _this.showSnackbar({ type: 'error', msg: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__common_api__[\"b\" /* codeToMessage */])(err.code) });\n            });\n        },\n        createTodo: function createTodo() {\n            var _this2 = this;\n\n            if (!this.todoContent) {\n                this.showSnackbar({ type: 'error', msg: '什么都没有，写点什么吧~！' });\n                return;\n            }\n            console.log('add a new todo');\n            __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__common_api__[\"c\" /* AddTodoItem */])({ content: this.todoContent, type: this.todoType }).then(function (newTodo) {\n                _this2.addTodo(newTodo);\n                _this2.currentTodo = newTodo;\n                _this2.showSnackbar({ type: 'success', msg: '添加成功！' });\n                _this2.$router.push({ name: 'list' });\n            }, function (err) {\n                _this2.showSnackbar({ type: 'error', msg: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__common_api__[\"b\" /* codeToMessage */])(err.code) });\n            });\n        },\n        gotoListPage: function gotoListPage() {\n            this.$router.push({\n                name: 'list'\n            });\n        }\n    }),\n    computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"a\" /* mapState */])('todo', ['todos'])),\n    created: function created() {\n        console.log(this.$router);\n        this.hideBottomNav();\n\n        var appHeaderTitle = '';\n        switch (this.$route.params.type) {\n            case 'add':\n                appHeaderTitle = '添加待办事项';\n                this.pageType = 'add';\n                break;\n            case 'edit':\n                appHeaderTitle = '编辑待办事项';\n                this.pageType = 'edit';\n                break;\n            default:\n                appHeaderTitle = '编辑待办事项';\n                this.pageType = 'add';\n        }\n        this.setAppHeader({\n            title: appHeaderTitle,\n            show: true,\n            showMenu: false,\n            showBack: true,\n            needBackConfirm: true,\n            actions: [{\n                icon: 'save'\n            }]\n        });\n        var todoId = this.$route.params.id;\n        if (todoId && this.pageType !== 'add' && (this.currentTodo = this.todos.get(todoId))) {\n            console.log(this.currentTodo);\n            this.currentTodo = this.todos.get(todoId);\n            this.todoType = this.currentTodo.get('type');\n            this.todoContent = this.currentTodo.get('content');\n        }\n    },\n    mounted: function mounted() {\n        var _this3 = this;\n\n        __WEBPACK_IMPORTED_MODULE_2__event_bus__[\"a\" /* default */].$on('app-header:click-action', function (eventData) {\n            console.log(eventData);\n\n            switch (eventData.actionIdx) {\n                case 0:\n                    if (_this3.pageType == 'edit') {\n                        _this3.saveTodoChange();\n                    } else if (_this3.pageType == 'add') {\n                        _this3.createTodo();\n                    }\n                    break;\n                default:\n            }\n        });\n        __WEBPACK_IMPORTED_MODULE_2__event_bus__[\"a\" /* default */].$on('app-header:click-back', function (eventData) {\n            console.log('back');\n            console.log(eventData);\n            if (_this3.pageType === 'edit' && _this3.isContentChanged()) {\n                _this3.showSaveChangeDialog();\n            } else if (_this3.pageType === 'add' && _this3.todoContent) {\n                _this3.showSaveChangeDialog();\n            } else {\n                _this3.gotoListPage();\n            }\n        });\n    },\n    beforeDestroy: function beforeDestroy() {\n        __WEBPACK_IMPORTED_MODULE_2__event_bus__[\"a\" /* default */].$off('app-header:click-action');\n        __WEBPACK_IMPORTED_MODULE_2__event_bus__[\"a\" /* default */].$off('app-header:click-back');\n    }\n});\n\n/***/ }),\n\n/***/ 498:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(471)(true);\n// imports\n\n\n// module\nexports.push([module.i, \".b[data-v-a315df0c]{border:1px solid red}.g[data-v-a315df0c]{border:1px solid green}.app-shell-footer[data-v-a315df0c]{position:fixed;bottom:0;left:0;right:0}\", \"\", {\"version\":3,\"sources\":[\"E:/PWA/pwa-todolist/src/pages/Edit.vue\"],\"names\":[],\"mappings\":\"AACA,oBACI,oBAAsB,CACzB,AACD,oBACI,sBAAwB,CAC3B,AACD,mCACI,eAAgB,AAChB,SAAU,AACV,OAAQ,AACR,OAAS,CACZ\",\"file\":\"Edit.vue\",\"sourcesContent\":[\"\\n.b[data-v-a315df0c] {\\r\\n    border: 1px solid red;\\n}\\n.g[data-v-a315df0c] {\\r\\n    border: 1px solid green;\\n}\\n.app-shell-footer[data-v-a315df0c] {\\r\\n    position: fixed;\\r\\n    bottom: 0;\\r\\n    left: 0;\\r\\n    right: 0;\\n}\\r\\n\\r\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 507:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(498);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(472)(\"84daef0a\", content, true);\n\n/***/ }),\n\n/***/ 519:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('v-app', {\n    staticClass: \"v-app-shell\",\n    attrs: {\n      \"fill-height\": \"\"\n    }\n  }, [_c('v-layout', {\n    staticClass: \"pa-3 fill-height\",\n    attrs: {\n      \"justify-center\": \"\"\n    }\n  }, [_c('v-text-field', {\n    staticClass: \"input-group--focused fill-height edit-area\",\n    attrs: {\n      \"label\": \"待办内容\",\n      \"multi-line\": \"\",\n      \"hide-details\": \"\"\n    },\n    model: {\n      value: (_vm.todoContent),\n      callback: function($$v) {\n        _vm.todoContent = $$v\n      },\n      expression: \"todoContent\"\n    }\n  })], 1), _vm._v(\" \"), _c('v-layout', {\n    attrs: {\n      \"row\": \"\",\n      \"justify-center\": \"\"\n    }\n  }, [_c('v-dialog', {\n    model: {\n      value: (_vm.dialogShow),\n      callback: function($$v) {\n        _vm.dialogShow = $$v\n      },\n      expression: \"dialogShow\"\n    }\n  }, [_c('v-card', [_c('v-card-title', [_vm._v(\"保存更改\")]), _vm._v(\" \"), _c('v-card-text', [_vm._v(\"\\n                    内容有所更改，是否保存？\\n                \")]), _vm._v(\" \"), _c('v-card-actions', [_c('v-spacer'), _vm._v(\" \"), _c('v-btn', {\n    staticClass: \"blue--text blue-1\",\n    attrs: {\n      \"flat\": \"flat\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.showSaveChangeDialogCancelled($event)\n      }\n    }\n  }, [_vm._v(\"放弃\")]), _vm._v(\" \"), _c('v-btn', {\n    attrs: {\n      \"primary\": \"\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.showSaveChangeDialogConfirmed($event)\n      }\n    }\n  }, [_vm._v(\"保存\")])], 1)], 1)], 1)], 1), _vm._v(\" \"), _c('footer', {\n    staticClass: \"app-shell-footer\"\n  }, [_c('v-bottom-nav', {\n    class: {\n      'red': _vm.todoType === 'ImpEmg',\n        'green': _vm.todoType === 'ImpNotEmg',\n        'orange': _vm.todoType === 'NotImpEmg',\n        'blue': _vm.todoType === 'NotImpNotEmg'\n    },\n    attrs: {\n      \"absolute\": \"\",\n      \"value\": \"true\"\n    }\n  }, [_c('v-btn', {\n    attrs: {\n      \"dark\": \"\",\n      \"value\": _vm.todoType === 'ImpEmg'\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.todoType = 'ImpEmg'\n      }\n    }\n  }, [_c('span', [_vm._v(\"重要紧急\")]), _vm._v(\" \"), _c('v-icon', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.todoType === 'ImpEmg'),\n      expression: \"todoType === 'ImpEmg'\"\n    }]\n  }, [_vm._v(\"check_circle\")])], 1), _vm._v(\" \"), _c('v-btn', {\n    attrs: {\n      \"dark\": \"\",\n      \"value\": _vm.todoType === 'ImpNotEmg'\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.todoType = 'ImpNotEmg'\n      }\n    }\n  }, [_c('span', [_vm._v(\"重要不紧急\")]), _vm._v(\" \"), _c('v-icon', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.todoType === 'ImpNotEmg'),\n      expression: \"todoType === 'ImpNotEmg'\"\n    }]\n  }, [_vm._v(\"check_circle\")])], 1), _vm._v(\" \"), _c('v-btn', {\n    attrs: {\n      \"dark\": \"\",\n      \"value\": _vm.todoType === 'NotImpEmg'\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.todoType = 'NotImpEmg'\n      }\n    }\n  }, [_c('span', [_vm._v(\"不重要紧急\")]), _vm._v(\" \"), _c('v-icon', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.todoType === 'NotImpEmg'),\n      expression: \"todoType === 'NotImpEmg'\"\n    }]\n  }, [_vm._v(\"check_circle\")])], 1), _vm._v(\" \"), _c('v-btn', {\n    attrs: {\n      \"dark\": \"\",\n      \"value\": _vm.todoType === 'NotImpNotEmg'\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.todoType = 'NotImpNotEmg'\n      }\n    }\n  }, [_c('span', [_vm._v(\"不重要不紧急\")]), _vm._v(\" \"), _c('v-icon', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.todoType === 'NotImpNotEmg'),\n      expression: \"todoType === 'NotImpNotEmg'\"\n    }]\n  }, [_vm._v(\"check_circle\")])], 1)], 1)], 1)], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/5.7bee48eafd4bfe2512c9.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a315df0c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!../../build/loaders/theme-loader.js??ref--2-1!./Edit.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!../../build/loaders/theme-loader.js??ref--2-1!./Edit.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a315df0c\\\",\\\"hasScoped\\\":true}!../../node_modules/vue-loader/lib/selector?type=template&index=0!../../build/loaders/theme-loader.js??ref--2-1!./Edit.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-a315df0c\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Edit.vue\n// module id = 474\n// module chunks = 5","<template>\r\n    <v-app fill-height class=\"v-app-shell\">\r\n        <v-layout class=\"pa-3 fill-height\" justify-center>\r\n            <v-text-field label=\"待办内容\" class=\"input-group--focused fill-height edit-area\" multi-line hide-details v-model=\"todoContent\"></v-text-field>\r\n        </v-layout>\r\n        <v-layout row justify-center>\r\n            <v-dialog v-model=\"dialogShow\">\r\n                <v-card>\r\n                    <v-card-title>保存更改</v-card-title>\r\n                    <v-card-text>\r\n                        内容有所更改，是否保存？\r\n                    </v-card-text>\r\n                    <v-card-actions>\r\n                        <v-spacer></v-spacer>\r\n                        <v-btn class=\"blue--text blue-1\" flat=\"flat\" @click.native=\"showSaveChangeDialogCancelled\">放弃</v-btn>\r\n                        <v-btn primary @click.native=\"showSaveChangeDialogConfirmed\">保存</v-btn>\r\n                    </v-card-actions>\r\n                </v-card>\r\n            </v-dialog>\r\n        </v-layout>\r\n        <footer class=\"app-shell-footer\">\r\n            <v-bottom-nav absolute value=\"true\" :class=\"{\r\n                'red': todoType === 'ImpEmg',\r\n                'green': todoType === 'ImpNotEmg',\r\n                'orange': todoType === 'NotImpEmg',\r\n                'blue': todoType === 'NotImpNotEmg'\r\n              }\">\r\n                <v-btn dark @click.native=\"todoType = 'ImpEmg'\" :value=\"todoType === 'ImpEmg'\">\r\n                    <span>重要紧急</span>\r\n                    <v-icon v-show=\"todoType === 'ImpEmg'\">check_circle</v-icon>\r\n                </v-btn>\r\n                <v-btn dark @click.native=\"todoType = 'ImpNotEmg'\" :value=\"todoType === 'ImpNotEmg'\">\r\n                    <span>重要不紧急</span>\r\n                    <v-icon v-show=\"todoType === 'ImpNotEmg'\">check_circle</v-icon>\r\n                </v-btn>\r\n                <v-btn dark @click.native=\"todoType = 'NotImpEmg'\" :value=\"todoType === 'NotImpEmg'\">\r\n                    <span>不重要紧急</span>\r\n                    <v-icon v-show=\"todoType === 'NotImpEmg'\">check_circle</v-icon>\r\n                </v-btn>\r\n                <v-btn dark @click.native=\"todoType = 'NotImpNotEmg'\" :value=\"todoType === 'NotImpNotEmg'\">\r\n                    <span>不重要不紧急</span>\r\n                    <v-icon v-show=\"todoType === 'NotImpNotEmg'\">check_circle</v-icon>\r\n                </v-btn>\r\n            </v-bottom-nav>\r\n        </footer>\r\n    </v-app>\r\n</template>\r\n<script>\r\nimport { mapActions, mapState } from 'vuex';\r\nimport EventBus from '@/event-bus';\r\nimport { AddTodoItem, codeToMessage } from '@/common/api';\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            todoType: 'ImpEmg',\r\n            todoContent: '',\r\n            currentTodo: null,\r\n            pageType: '',\r\n            dialogShow: false\r\n        }\r\n    },\r\n    methods: {\r\n        ...mapActions('appShell/appHeader', [\r\n            'setAppHeader'\r\n        ]),\r\n        ...mapActions('appShell/appBottomNavigator', [\r\n            'hideBottomNav',\r\n        ]),\r\n        ...mapActions('todo', [\r\n            'setTodo',\r\n            'addTodo'\r\n        ]),\r\n        ...mapActions('appShell/appSnackbar', [\r\n            'showSnackbar',\r\n        ]),\r\n        // 显示保存更改对话框\r\n        showSaveChangeDialog: function() {\r\n            this.dialogShow = true;\r\n        },\r\n        // 点击保存更改对话框的\"保存\"按钮\r\n        showSaveChangeDialogConfirmed: function() {\r\n            console.log('dialog confirm clicked');\r\n            if (this.pageType === 'edit') {\r\n                this.saveTodoChange();\r\n            } else if (this.pageType === 'add') {\r\n                this.createTodo();\r\n            } else {\r\n                this.gotoListPage();\r\n            }\r\n        },\r\n        // 点击保存更改对话框的\"放弃\"按钮\r\n        showSaveChangeDialogCancelled: function() {\r\n            this.gotoListPage();\r\n        },\r\n        isContentChanged: function() {\r\n            return this.currentTodo.get('content') !== this.todoContent;\r\n        },\r\n        saveTodoChange: function() {\r\n            this.currentTodo.set('type', this.todoType);\r\n            this.currentTodo.set('content', this.todoContent);\r\n            this.setTodo(this.currentTodo).then((changedTodo) => {\r\n                this.showSnackbar({ type: 'success', msg: '保存成功！' });\r\n                this.gotoListPage();\r\n            }, (err) => {\r\n                console.log(err);\r\n                this.showSnackbar({ type: 'error', msg: codeToMessage(err.code) });\r\n            });\r\n        },\r\n        createTodo: function() {\r\n            // 没有内容直接返回\r\n            if (!this.todoContent) {\r\n                this.showSnackbar({ type: 'error', msg: '什么都没有，写点什么吧~！' });\r\n                return\r\n            }\r\n            console.log('add a new todo');\r\n            AddTodoItem({ content: this.todoContent, type: this.todoType }).then((newTodo) => {\r\n                this.addTodo(newTodo);\r\n                this.currentTodo = newTodo;\r\n                this.showSnackbar({ type: 'success', msg: '添加成功！' });\r\n                this.$router.push({ name: 'list' });\r\n            }, (err) => {\r\n                this.showSnackbar({ type: 'error', msg: codeToMessage(err.code) });\r\n            })\r\n        },\r\n        gotoListPage: function() {\r\n            this.$router.push({\r\n                name: 'list'\r\n            });\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapState('todo', [\r\n            'todos'\r\n        ]),\r\n    },\r\n    created: function() {\r\n        console.log(this.$router);\r\n        this.hideBottomNav();\r\n\r\n        let appHeaderTitle = '';\r\n        switch (this.$route.params.type) {\r\n            case 'add':\r\n                appHeaderTitle = '添加待办事项';\r\n                this.pageType = 'add';\r\n                break;\r\n            case 'edit':\r\n                appHeaderTitle = '编辑待办事项';\r\n                this.pageType = 'edit';\r\n                break;\r\n            default:\r\n                appHeaderTitle = '编辑待办事项';\r\n                this.pageType = 'add';\r\n        }\r\n        this.setAppHeader({\r\n            title: appHeaderTitle,\r\n            show: true,\r\n            showMenu: false,\r\n            showBack: true,\r\n            needBackConfirm: true,\r\n            actions: [{\r\n                icon: 'save',\r\n            }]\r\n        });\r\n        let todoId = this.$route.params.id;\r\n        if (todoId && (this.pageType !== 'add') && (this.currentTodo = this.todos.get(todoId))) {\r\n            console.log(this.currentTodo);\r\n            this.currentTodo = this.todos.get(todoId);\r\n            this.todoType = this.currentTodo.get('type');\r\n            this.todoContent = this.currentTodo.get('content');\r\n        }\r\n    },\r\n    mounted: function() {\r\n        EventBus.$on('app-header:click-action', (eventData) => {\r\n            console.log(eventData);\r\n\r\n            switch (eventData.actionIdx) {\r\n                case 0:\r\n                    if (this.pageType == 'edit') {\r\n                        this.saveTodoChange();\r\n                    } else if (this.pageType == 'add') {\r\n                        this.createTodo();\r\n                    }\r\n                    break;\r\n                default:\r\n            }\r\n        })\r\n        EventBus.$on(`app-header:click-back`, (eventData) => {\r\n            console.log('back');\r\n            console.log(eventData);\r\n            if (this.pageType === 'edit' && this.isContentChanged()) {\r\n                this.showSaveChangeDialog();\r\n            } else if (this.pageType === 'add' && this.todoContent) {\r\n                this.showSaveChangeDialog();\r\n            } else {\r\n                this.gotoListPage();\r\n            }\r\n\r\n\r\n        });\r\n    },\r\n    beforeDestroy: function() {\r\n        EventBus.$off('app-header:click-action');\r\n        EventBus.$off('app-header:click-back');\r\n    },\r\n}\r\n\r\n</script>\r\n<style scoped>\r\n.b {\r\n    border: 1px solid red;\r\n}\r\n\r\n.g {\r\n    border: 1px solid green;\r\n}\r\n\r\n\r\n\r\n.app-shell-footer {\r\n    position: fixed;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// Edit.vue?9d925b58","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".b[data-v-a315df0c]{border:1px solid red}.g[data-v-a315df0c]{border:1px solid green}.app-shell-footer[data-v-a315df0c]{position:fixed;bottom:0;left:0;right:0}\", \"\", {\"version\":3,\"sources\":[\"E:/PWA/pwa-todolist/src/pages/Edit.vue\"],\"names\":[],\"mappings\":\"AACA,oBACI,oBAAsB,CACzB,AACD,oBACI,sBAAwB,CAC3B,AACD,mCACI,eAAgB,AAChB,SAAU,AACV,OAAQ,AACR,OAAS,CACZ\",\"file\":\"Edit.vue\",\"sourcesContent\":[\"\\n.b[data-v-a315df0c] {\\r\\n    border: 1px solid red;\\n}\\n.g[data-v-a315df0c] {\\r\\n    border: 1px solid green;\\n}\\n.app-shell-footer[data-v-a315df0c] {\\r\\n    position: fixed;\\r\\n    bottom: 0;\\r\\n    left: 0;\\r\\n    right: 0;\\n}\\r\\n\\r\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-a315df0c\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./build/loaders/theme-loader.js?{\"injectInVueFile\":true}!./src/pages/Edit.vue\n// module id = 498\n// module chunks = 5","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a315df0c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!../../build/loaders/theme-loader.js?{\\\"injectInVueFile\\\":true}!./Edit.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"84daef0a\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-a315df0c\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./build/loaders/theme-loader.js?{\"injectInVueFile\":true}!./src/pages/Edit.vue\n// module id = 507\n// module chunks = 5","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('v-app', {\n    staticClass: \"v-app-shell\",\n    attrs: {\n      \"fill-height\": \"\"\n    }\n  }, [_c('v-layout', {\n    staticClass: \"pa-3 fill-height\",\n    attrs: {\n      \"justify-center\": \"\"\n    }\n  }, [_c('v-text-field', {\n    staticClass: \"input-group--focused fill-height edit-area\",\n    attrs: {\n      \"label\": \"待办内容\",\n      \"multi-line\": \"\",\n      \"hide-details\": \"\"\n    },\n    model: {\n      value: (_vm.todoContent),\n      callback: function($$v) {\n        _vm.todoContent = $$v\n      },\n      expression: \"todoContent\"\n    }\n  })], 1), _vm._v(\" \"), _c('v-layout', {\n    attrs: {\n      \"row\": \"\",\n      \"justify-center\": \"\"\n    }\n  }, [_c('v-dialog', {\n    model: {\n      value: (_vm.dialogShow),\n      callback: function($$v) {\n        _vm.dialogShow = $$v\n      },\n      expression: \"dialogShow\"\n    }\n  }, [_c('v-card', [_c('v-card-title', [_vm._v(\"保存更改\")]), _vm._v(\" \"), _c('v-card-text', [_vm._v(\"\\n                    内容有所更改，是否保存？\\n                \")]), _vm._v(\" \"), _c('v-card-actions', [_c('v-spacer'), _vm._v(\" \"), _c('v-btn', {\n    staticClass: \"blue--text blue-1\",\n    attrs: {\n      \"flat\": \"flat\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.showSaveChangeDialogCancelled($event)\n      }\n    }\n  }, [_vm._v(\"放弃\")]), _vm._v(\" \"), _c('v-btn', {\n    attrs: {\n      \"primary\": \"\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.showSaveChangeDialogConfirmed($event)\n      }\n    }\n  }, [_vm._v(\"保存\")])], 1)], 1)], 1)], 1), _vm._v(\" \"), _c('footer', {\n    staticClass: \"app-shell-footer\"\n  }, [_c('v-bottom-nav', {\n    class: {\n      'red': _vm.todoType === 'ImpEmg',\n        'green': _vm.todoType === 'ImpNotEmg',\n        'orange': _vm.todoType === 'NotImpEmg',\n        'blue': _vm.todoType === 'NotImpNotEmg'\n    },\n    attrs: {\n      \"absolute\": \"\",\n      \"value\": \"true\"\n    }\n  }, [_c('v-btn', {\n    attrs: {\n      \"dark\": \"\",\n      \"value\": _vm.todoType === 'ImpEmg'\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.todoType = 'ImpEmg'\n      }\n    }\n  }, [_c('span', [_vm._v(\"重要紧急\")]), _vm._v(\" \"), _c('v-icon', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.todoType === 'ImpEmg'),\n      expression: \"todoType === 'ImpEmg'\"\n    }]\n  }, [_vm._v(\"check_circle\")])], 1), _vm._v(\" \"), _c('v-btn', {\n    attrs: {\n      \"dark\": \"\",\n      \"value\": _vm.todoType === 'ImpNotEmg'\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.todoType = 'ImpNotEmg'\n      }\n    }\n  }, [_c('span', [_vm._v(\"重要不紧急\")]), _vm._v(\" \"), _c('v-icon', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.todoType === 'ImpNotEmg'),\n      expression: \"todoType === 'ImpNotEmg'\"\n    }]\n  }, [_vm._v(\"check_circle\")])], 1), _vm._v(\" \"), _c('v-btn', {\n    attrs: {\n      \"dark\": \"\",\n      \"value\": _vm.todoType === 'NotImpEmg'\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.todoType = 'NotImpEmg'\n      }\n    }\n  }, [_c('span', [_vm._v(\"不重要紧急\")]), _vm._v(\" \"), _c('v-icon', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.todoType === 'NotImpEmg'),\n      expression: \"todoType === 'NotImpEmg'\"\n    }]\n  }, [_vm._v(\"check_circle\")])], 1), _vm._v(\" \"), _c('v-btn', {\n    attrs: {\n      \"dark\": \"\",\n      \"value\": _vm.todoType === 'NotImpNotEmg'\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.todoType = 'NotImpNotEmg'\n      }\n    }\n  }, [_c('span', [_vm._v(\"不重要不紧急\")]), _vm._v(\" \"), _c('v-icon', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.todoType === 'NotImpNotEmg'),\n      expression: \"todoType === 'NotImpNotEmg'\"\n    }]\n  }, [_vm._v(\"check_circle\")])], 1)], 1)], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-a315df0c\",\"hasScoped\":true}!./~/vue-loader/lib/selector.js?type=template&index=0!./build/loaders/theme-loader.js?{\"injectInVueFile\":true}!./src/pages/Edit.vue\n// module id = 519\n// module chunks = 5"],"sourceRoot":""}