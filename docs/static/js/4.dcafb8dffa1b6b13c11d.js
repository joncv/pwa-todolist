webpackJsonp([4],{474:function(o,t,e){function a(o){e(505)}var n=e(37)(e(483),e(516),a,"data-v-a315df0c",null);o.exports=n.exports},483:function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e(58),n=e.n(a),i=e(59),s=e(126),r=e(178);t.default={data:function(){return{todoType:"ImpEmg",todoContent:"",currentTodo:null,pageType:"",dialogShow:!1}},methods:n()({},e.i(i.b)("appShell/appHeader",["setAppHeader"]),e.i(i.b)("appShell/appBottomNavigator",["hideBottomNav"]),e.i(i.b)("todo",["setTodo","addTodo"]),e.i(i.b)("appShell/appSnackbar",["showSnackbar"]),{showSaveChangeDialog:function(){this.dialogShow=!0},showSaveChangeDialogConfirmed:function(){console.log("dialog confirm clicked"),"edit"===this.pageType?this.saveTodoChange():"add"===this.pageType?this.createTodo():this.gotoListPage()},showSaveChangeDialogCancelled:function(){this.gotoListPage()},isContentChanged:function(){return this.currentTodo.get("content")!==this.todoContent},saveTodoChange:function(){var o=this;this.currentTodo.set("type",this.todoType),this.currentTodo.set("content",this.todoContent),this.setTodo(this.currentTodo).then(function(t){o.showSnackbar({type:"success",msg:"保存成功！"}),o.gotoListPage()},function(t){console.log(t),o.showSnackbar({type:"error",msg:e.i(r.b)(t.code)})})},createTodo:function(){var o=this;if(!this.todoContent)return void this.showSnackbar({type:"error",msg:"什么都没有，写点什么吧~！"});console.log("add a new todo"),e.i(r.c)({content:this.todoContent,type:this.todoType}).then(function(t){o.addTodo(t),o.currentTodo=t,o.showSnackbar({type:"success",msg:"添加成功！"}),o.$router.push({name:"list"})},function(t){o.showSnackbar({type:"error",msg:e.i(r.b)(t.code)})})},gotoListPage:function(){this.$router.push({name:"list"})}}),computed:n()({},e.i(i.a)("todo",["todos"])),created:function(){console.log(this.$router),this.hideBottomNav();var o="";switch(this.$route.params.type){case"add":o="添加待办事项",this.pageType="add";break;case"edit":o="编辑待办事项",this.pageType="edit";break;default:o="编辑待办事项",this.pageType="add"}this.setAppHeader({title:o,show:!0,showMenu:!1,showBack:!0,needBackConfirm:!0,actions:[{icon:"save"}]});var t=this.$route.params.id;t&&"add"!==this.pageType&&(this.currentTodo=this.todos.get(t))&&(console.log(this.currentTodo),this.currentTodo=this.todos.get(t),this.todoType=this.currentTodo.get("type"),this.todoContent=this.currentTodo.get("content"))},mounted:function(){var o=this;s.a.$on("app-header:click-action",function(t){switch(console.log(t),t.actionIdx){case 0:"edit"==o.pageType?o.saveTodoChange():"add"==o.pageType&&o.createTodo()}}),s.a.$on("app-header:click-back",function(t){console.log("back"),console.log(t),"edit"===o.pageType&&o.isContentChanged()?o.showSaveChangeDialog():"add"===o.pageType&&o.todoContent?o.showSaveChangeDialog():o.gotoListPage()})},beforeDestroy:function(){s.a.$off("app-header:click-action"),s.a.$off("app-header:click-back")}}},497:function(o,t,e){t=o.exports=e(471)(!0),t.push([o.i,".b[data-v-a315df0c]{border:1px solid red}.g[data-v-a315df0c]{border:1px solid green}.app-shell-footer[data-v-a315df0c]{position:fixed;bottom:0;left:0;right:0}","",{version:3,sources:["E:/PWA/pwa-todolist/src/pages/Edit.vue"],names:[],mappings:"AACA,oBACI,oBAAsB,CACzB,AACD,oBACI,sBAAwB,CAC3B,AACD,mCACI,eAAgB,AAChB,SAAU,AACV,OAAQ,AACR,OAAS,CACZ",file:"Edit.vue",sourcesContent:["\n.b[data-v-a315df0c] {\r\n    border: 1px solid red;\n}\n.g[data-v-a315df0c] {\r\n    border: 1px solid green;\n}\n.app-shell-footer[data-v-a315df0c] {\r\n    position: fixed;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\n}\r\n\r\n"],sourceRoot:""}])},505:function(o,t,e){var a=e(497);"string"==typeof a&&(a=[[o.i,a,""]]),a.locals&&(o.exports=a.locals);e(472)("84daef0a",a,!0)},516:function(o,t){o.exports={render:function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("v-app",{staticClass:"v-app-shell",attrs:{"fill-height":""}},[e("v-layout",{staticClass:"pa-3 fill-height",attrs:{"justify-center":""}},[e("v-text-field",{staticClass:"input-group--focused fill-height edit-area",attrs:{label:"待办内容","multi-line":"","hide-details":""},model:{value:o.todoContent,callback:function(t){o.todoContent=t},expression:"todoContent"}})],1),o._v(" "),e("v-layout",{attrs:{row:"","justify-center":""}},[e("v-dialog",{model:{value:o.dialogShow,callback:function(t){o.dialogShow=t},expression:"dialogShow"}},[e("v-card",[e("v-card-title",[o._v("保存更改")]),o._v(" "),e("v-card-text",[o._v("\n                    内容有所更改，是否保存？\n                ")]),o._v(" "),e("v-card-actions",[e("v-spacer"),o._v(" "),e("v-btn",{staticClass:"blue--text blue-1",attrs:{flat:"flat"},nativeOn:{click:function(t){o.showSaveChangeDialogCancelled(t)}}},[o._v("放弃")]),o._v(" "),e("v-btn",{attrs:{primary:""},nativeOn:{click:function(t){o.showSaveChangeDialogConfirmed(t)}}},[o._v("保存")])],1)],1)],1)],1),o._v(" "),e("footer",{staticClass:"app-shell-footer"},[e("v-bottom-nav",{class:{red:"ImpEmg"===o.todoType,green:"ImpNotEmg"===o.todoType,orange:"NotImpEmg"===o.todoType,blue:"NotImpNotEmg"===o.todoType},attrs:{absolute:"",value:"true"}},[e("v-btn",{attrs:{dark:"",value:"ImpEmg"===o.todoType},nativeOn:{click:function(t){o.todoType="ImpEmg"}}},[e("span",[o._v("重要紧急")]),o._v(" "),e("v-icon",{directives:[{name:"show",rawName:"v-show",value:"ImpEmg"===o.todoType,expression:"todoType === 'ImpEmg'"}]},[o._v("check_circle")])],1),o._v(" "),e("v-btn",{attrs:{dark:"",value:"ImpNotEmg"===o.todoType},nativeOn:{click:function(t){o.todoType="ImpNotEmg"}}},[e("span",[o._v("重要不紧急")]),o._v(" "),e("v-icon",{directives:[{name:"show",rawName:"v-show",value:"ImpNotEmg"===o.todoType,expression:"todoType === 'ImpNotEmg'"}]},[o._v("check_circle")])],1),o._v(" "),e("v-btn",{attrs:{dark:"",value:"NotImpEmg"===o.todoType},nativeOn:{click:function(t){o.todoType="NotImpEmg"}}},[e("span",[o._v("不重要紧急")]),o._v(" "),e("v-icon",{directives:[{name:"show",rawName:"v-show",value:"NotImpEmg"===o.todoType,expression:"todoType === 'NotImpEmg'"}]},[o._v("check_circle")])],1),o._v(" "),e("v-btn",{attrs:{dark:"",value:"NotImpNotEmg"===o.todoType},nativeOn:{click:function(t){o.todoType="NotImpNotEmg"}}},[e("span",[o._v("不重要不紧急")]),o._v(" "),e("v-icon",{directives:[{name:"show",rawName:"v-show",value:"NotImpNotEmg"===o.todoType,expression:"todoType === 'NotImpNotEmg'"}]},[o._v("check_circle")])],1)],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=4.dcafb8dffa1b6b13c11d.js.map